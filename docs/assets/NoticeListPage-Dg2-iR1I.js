import{d as j,r as d,V as D,o as A,c as a,y as _,b as t,e as b,w as Q,i as P,W as R,F as f,f as w,j as U,p as m,t as l,z as L,A as G,X as Y,Y as V,n as W,Q as X,G as Z,h as o,u as H,Z as J}from"./index-CykwwcsO.js";import{_ as K}from"./search_black_24dp-D-_aa7Cb.js";import{_ as O}from"./PageHeader.vue_vue_type_script_setup_true_lang-DIMsOurW.js";const q="/Dreamseekers-FE/img/icon/campaign_black_24dp.svg",ee={class:"font-[var(--font-body)]"},te={class:"container mx-auto px-4 sm:px-6 lg:px-8 py-12"},re={class:"flex items-center border border-gray-300 rounded-md shadow-sm overflow-hidden"},se=["value"],ae={key:0,class:"text-center text-sm text-gray-600 mb-6"},oe={class:"min-w-full divide-y divide-gray-200 border-t border-b border-gray-300"},ne={class:"bg-white divide-y divide-gray-200"},le=["onClick"],ie={class:"px-4 py-3 whitespace-nowrap text-sm text-left"},de={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},ce={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},ue=["onClick"],me={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},xe={class:"px-4 py-3 whitespace-nowrap text-sm text-left"},pe={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},ve={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-500 text-center"},ge={key:0},ye={key:1,class:"mt-6 text-right"},he={key:2,class:"mt-8 flex justify-center"},_e={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},be=["disabled"],fe=["onClick"],we=["disabled"],u=5,De=j({__name:"NoticeListPage",setup(ke){const z=X();Z();const B=d(H.isStaff),k=d([]),C=d([]),n=d({...J}),E=d(D),x=d(D[0].value),p=d(""),v=d(""),M=d(""),g=(s=1,e="",c="all")=>{console.log(`Loading notices: page=${s}, query=${e}, type=${c}`),v.value=e,M.value=c,k.value=[...Y];let r=[...V];e&&(r=V.filter($=>{const h=e.toLowerCase();return c==="title"?$.title.toLowerCase().includes(h):c==="contents"?!0:$.title.toLowerCase().includes(h)}));const i=r.length,y=(s-1)*u;C.value=r.slice(y,y+u),n.value={count:i,start_index:y+1,number:s,has_other_pages:i>u*s||s>1,has_previous:s>1,has_next:i>u*s,previous_page_number:s>1?s-1:null,next_page_number:i>u*s?s+1:null,custom_range:Array.from({length:Math.ceil(i/u)},($,h)=>h+1).slice(0,5)}},F=()=>{g(1,p.value,x.value)},I=()=>{p.value="",x.value=D[0].value,g(1)},N=s=>{z.push(`/notice/${s}`)},S=s=>{s!==null&&s!==n.value.number&&(g(s,v.value,M.value),window.scrollTo({top:0,behavior:"smooth"}))},T=s=>{const e=new Date(s);return`${e.getFullYear()}.${(e.getMonth()+1).toString().padStart(2,"0")}.${e.getDate().toString().padStart(2,"0")}`};return A(()=>{g(1)}),(s,e)=>{const c=G("router-link");return o(),a("div",ee,[_(O,{title:"소통 마당",backgroundImageUrl:"/img/top_header/forum.jpg"}),t("div",te,[e[12]||(e[12]=t("h1",{class:"text-3xl font-bold text-center mb-8 text-[var(--dream-text)]"},"공지사항",-1)),t("form",{onSubmit:Q(F,["prevent"]),class:"mb-8 max-w-xl mx-auto"},[t("div",re,[P(t("select",{"onUpdate:modelValue":e[0]||(e[0]=r=>x.value=r),class:"px-3 py-2 border-r border-gray-300 bg-gray-50 text-sm text-gray-700 focus:outline-none"},[(o(!0),a(f,null,w(E.value,r=>(o(),a("option",{key:r.value,value:r.value},l(r.text),9,se))),128))],512),[[R,x.value]]),P(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=r=>p.value=r),placeholder:"검색어를 입력해주세요",class:"flex-grow px-4 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-[var(--dream-main)]"},null,512),[[U,p.value]]),e[4]||(e[4]=t("button",{type:"submit",class:"px-4 py-2 bg-[var(--dream-main)] text-white hover:bg-opacity-80 transition-colors"},[t("img",{src:K,alt:"검색",class:"h-5 w-5"})],-1))])],32),v.value?(o(),a("div",ae,[m(` "'`+l(v.value)+"' 검색 결과입니다. ",1),t("button",{onClick:I,class:"ml-2 text-[var(--dream-blue)] hover:underline text-xs"},"(검색 초기화)"),e[5]||(e[5]=m('" '))])):b("",!0),t("table",oe,[e[8]||(e[8]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-16"},"번호"),t("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"제목"),t("th",{scope:"col",class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-24"},"글쓴이"),t("th",{scope:"col",class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-32"},"작성일")])],-1)),t("tbody",ne,[(o(!0),a(f,null,w(k.value,r=>(o(),a("tr",{key:`important-${r.pk}`,class:"hover:bg-gray-100 cursor-pointer transition-colors duration-150 bg-yellow-50 font-semibold",onClick:i=>N(r.pk)},[e[6]||(e[6]=t("td",{class:"px-4 py-3 whitespace-nowrap text-sm text-center"},[t("span",{class:"inline-flex items-center justify-center text-[var(--dream-main)]"},[t("img",{src:q,alt:"중요",class:"h-5 w-5 mr-1 opacity-70"})])],-1)),t("td",ie,[_(c,{to:`/notice/${r.pk}`,class:"hover:underline text-[var(--dream-text)] hover:text-[var(--dream-main)]"},{default:L(()=>[m(l(r.title),1)]),_:2},1032,["to"])]),t("td",de,l(r.author),1),t("td",ce,l(T(r.created_at)),1)],8,le))),128)),(o(!0),a(f,null,w(C.value,(r,i)=>(o(),a("tr",{key:r.pk,class:"hover:bg-gray-100 cursor-pointer transition-colors duration-150",onClick:y=>N(r.pk)},[t("td",me,l(n.value.count-n.value.start_index-i+1),1),t("td",xe,[_(c,{to:`/notice/${r.pk}`,class:"hover:underline text-[var(--dream-text)] hover:text-[var(--dream-main)]"},{default:L(()=>[m(l(r.title),1)]),_:2},1032,["to"])]),t("td",pe,l(r.author),1),t("td",ve,l(T(r.created_at)),1)],8,ue))),128)),k.value.length===0&&C.value.length===0?(o(),a("tr",ge,e[7]||(e[7]=[t("td",{colspan:"4",class:"px-4 py-8 text-center text-gray-500"},"표시할 공지사항이 없습니다.",-1)]))):b("",!0)])]),B.value?(o(),a("div",ye,[_(c,{to:"/notice/write",class:"inline-block bg-[var(--dream-main)] hover:bg-opacity-80 text-white font-semibold py-2 px-6 rounded-md shadow-sm"},{default:L(()=>e[9]||(e[9]=[m(" 글쓰기 ")])),_:1,__:[9]})])):b("",!0),n.value.has_other_pages?(o(),a("div",he,[t("nav",_e,[t("button",{onClick:e[2]||(e[2]=r=>S(n.value.previous_page_number)),disabled:!n.value.has_previous,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50"},e[10]||(e[10]=[t("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]),8,be),(o(!0),a(f,null,w(n.value.custom_range,r=>(o(),a("button",{key:r,onClick:i=>S(r),class:W(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",r===n.value.number?"z-10 bg-[var(--dream-main)] border-[var(--dream-main)] text-white":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"])},l(r),11,fe))),128)),t("button",{onClick:e[3]||(e[3]=r=>S(n.value.next_page_number)),disabled:!n.value.has_next,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50"},e[11]||(e[11]=[t("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)]),8,we)])])):b("",!0),e[13]||(e[13]=t("div",{class:"mt-12 border-t border-[var(--dream-gray-dark)] opacity-30"},null,-1))])])}}});export{De as default};

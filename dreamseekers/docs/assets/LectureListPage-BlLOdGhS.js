import{d as D,c as r,b as e,e as g,y as M,z as H,A as Q,h as o,t as c,_ as V,r as u,B as X,a as q,w as k,i as C,j as I,F as L,f as j,n as U,C as G,D as J,v as K,u as W,E as Y}from"./index-CG98PHEb.js";import{_ as Z}from"./search_black_24dp-D-_aa7Cb.js";import{_ as E}from"./PageHeader.vue_vue_type_script_setup_true_lang-DWOPV2Xf.js";const T={class:"lecture-content bg-white shadow-lg rounded-lg overflow-hidden transition-all duration-300 hover:shadow-xl relative group flex flex-col"},ee={class:"relative p-5 flex-grow"},te=["src","alt"],ae=["data-id"],se={class:"text-sm text-[var(--dream-sub)] leading-relaxed line-clamp-3"},le={key:0,class:"absolute top-3 right-3 flex flex-col space-y-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200"},oe=D({__name:"LectureCard",props:{lecture:{},isStaff:{type:Boolean},detailUrl:{}},emits:["edit","delete"],setup(B,{emit:y}){return(s,m)=>{const n=Q("router-link");return o(),r("li",T,[e("div",ee,[M(n,{to:s.detailUrl||"#",class:"block"},{default:H(()=>[e("img",{src:s.lecture.image||"/img/dummy/placeholder-lecture.png",alt:s.lecture.title,class:"w-full h-48 object-cover rounded-md mb-4"},null,8,te),e("h2",{class:"text-xl font-semibold text-[var(--dream-text)] mb-2 truncate group-hover:text-[var(--dream-main)]","data-id":s.lecture.id},c(s.lecture.title),9,ae),e("p",se,c(s.lecture.contents),1)]),_:1},8,["to"])]),s.isStaff?(o(),r("div",le,[e("button",{onClick:m[0]||(m[0]=b=>s.$emit("edit",s.lecture)),class:"bg-[var(--dream-blue)] hover:bg-opacity-80 text-white text-xs font-semibold py-1 px-2.5 rounded-md shadow-sm"},"수정"),e("button",{onClick:m[1]||(m[1]=b=>s.$emit("delete",s.lecture.id)),class:"bg-red-500 hover:bg-red-600 text-white text-xs font-semibold py-1 px-2.5 rounded-md shadow-sm"},"삭제")])):g("",!0)])}}}),re=V(oe,[["__scopeId","data-v-410fbf91"]]),ne={class:"font-[var(--font-body)]"},ie={class:"container mx-auto px-4 sm:px-6 lg:px-8 py-12"},de={class:"text-3xl font-bold text-center mb-8 text-[var(--dream-text)]"},ue={class:"flex flex-col sm:flex-row justify-between items-center mb-8 gap-4"},ce={class:"relative"},me={key:0,class:"text-center text-gray-500 py-8"},ve={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8"},pe={key:2,class:"text-center text-gray-500 py-8"},fe={class:"flex justify-between items-center mb-6"},ge={class:"text-xl font-semibold text-[var(--dream-text)]"},xe={class:"space-y-4"},be={key:0},he=["for"],ye=["type","id","onUpdate:modelValue"],_e=["id","onUpdate:modelValue"],we={key:1},ke={class:"block text-sm font-medium text-[var(--dream-sub)] mb-1"},Ce={class:"mt-1 w-full flex flex-col items-center px-4 py-3 bg-white text-[var(--dream-blue)] rounded-lg shadow border border-[var(--dream-blue)] border-dashed cursor-pointer hover:bg-[var(--dream-gray)] hover:text-[var(--dream-main)] transition-colors"},Le={class:"mt-1 text-xs leading-normal"},$e=["id"],Se={key:0,class:"mt-3 text-center"},Ie={class:"border border-gray-300 p-2 rounded-md w-full max-w-xs h-40 mx-auto flex items-center justify-center overflow-hidden relative bg-gray-50"},je=["src"],Ue={class:"mt-8 text-right space-x-3"},De={type:"submit",class:"bg-[var(--dream-main)] hover:bg-opacity-80 text-white font-semibold py-2 px-4 rounded-md shadow-sm"},Me=D({__name:"LectureListPage",setup(B){const y=u(W.isStaff),s=u([...G]),m=u(""),n=u(""),b=X(()=>n.value?s.value.filter(l=>l.title.toLowerCase().includes(n.value.toLowerCase())||l.contents.toLowerCase().includes(n.value.toLowerCase())):s.value),z=()=>{n.value=m.value},v=u(!1),p=u(!1),h=u(null),w={title:"",contents:""},i=q({...w}),F=u(Y),d=u(null),f=u(null),$=l=>{l&&typeof l.id=="number"?(p.value=!0,h.value=l.id,i.title=l.title,i.contents=l.contents,d.value=l.image||null):(p.value=!1,h.value=null,Object.assign(i,w),d.value=null),f.value=null,v.value=!0},_=()=>{v.value=!1,Object.assign(i,w),d.value=null,f.value=null,p.value=!1,h.value=null},A=()=>{let l=d.value;if(f.value?l=d.value:!d.value&&p.value&&(l="/img/dummy/placeholder-lecture.png"),p.value&&h.value!==null){const a=s.value.findIndex(t=>t.id===h.value);a!==-1&&(s.value[a]={...s.value[a],...i,image:l||s.value[a].image})}else{const a=s.value.length>0?Math.max(...s.value.map(t=>t.id))+1:1;s.value.push({id:a,...i,image:l||"/img/dummy/placeholder-lecture.png"})}_()},N=l=>{window.confirm("정말로 이 강의 정보를 삭제하시겠습니까?")&&(s.value=s.value.filter(a=>a.id!==l))},P=l=>{const a=l.target;if(a.files&&a.files[0]){const t=a.files[0];f.value=t;const x=new FileReader;x.onload=R=>{var S;d.value=(S=R.target)==null?void 0:S.result},x.readAsDataURL(t),a.value=""}},O=()=>{d.value=null,f.value=null};return(l,a)=>(o(),r("div",ne,[M(E,{title:"주요 강의",backgroundImageUrl:"/img/top_header/lecture.jpg"}),e("div",ie,[e("h1",de,c(n.value?`"${n.value}" 검색 결과`:"전체 강의"),1),e("div",ue,[e("form",{onSubmit:k(z,["prevent"]),class:"w-full sm:w-auto flex-grow sm:max-w-md"},[e("div",ce,[C(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=t=>m.value=t),placeholder:"강의명을 입력해주세요",class:"search-text w-full pl-4 pr-10 py-2 border border-[var(--dream-gray-dark)] rounded-md shadow-sm focus:ring-[var(--dream-main)] focus:border-[var(--dream-main)]"},null,512),[[I,m.value]]),a[2]||(a[2]=e("button",{type:"submit",class:"search-image absolute inset-y-0 right-0 flex items-center pr-3"},[e("img",{src:Z,alt:"검색",class:"h-5 w-5 text-gray-400"})],-1))])],32),y.value?(o(),r("button",{key:0,onClick:a[1]||(a[1]=t=>$()),class:"bg-[var(--dream-main)] hover:bg-opacity-80 text-white font-semibold py-2 px-6 rounded-md shadow-sm transition duration-150 ease-in-out w-full sm:w-auto"}," 강의 추가 ")):g("",!0)]),n.value&&b.value.length===0?(o(),r("div",me,[e("p",null,'"'+c(n.value)+'"에 대한 검색 결과가 없습니다.',1)])):b.value.length>0?(o(),r("ul",ve,[(o(!0),r(L,null,j(b.value,t=>(o(),J(re,{key:t.id,lecture:t,"is-staff":y.value,"detail-url":`/lectures/${t.id}`,onEdit:$,onDelete:N},null,8,["lecture","is-staff","detail-url"]))),128))])):(o(),r("div",pe,a[3]||(a[3]=[e("p",null,"표시할 강의가 없습니다.",-1)]))),a[6]||(a[6]=e("div",{class:"mt-12 border-t border-[var(--dream-gray-dark)] opacity-30"},null,-1)),y.value&&v.value?(o(),r("div",{key:3,class:U(["fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 transition-opacity duration-300 ease-in-out",{"opacity-100":v.value,"opacity-0 pointer-events-none":!v.value}]),onClick:k(_,["self"])},[e("div",{class:U(["bg-white p-6 sm:p-8 rounded-lg shadow-2xl w-full max-w-lg transform transition-all duration-300 ease-in-out",{"scale-100":v.value,"scale-95":!v.value}])},[e("div",fe,[e("h3",ge,c(p.value?"강의 정보 수정":"새 강의 추가"),1),e("button",{onClick:_,class:"text-gray-400 hover:text-gray-600 text-2xl leading-none"},"×")]),e("form",{onSubmit:k(A,["prevent"])},[e("div",xe,[(o(!0),r(L,null,j(F.value,t=>(o(),r(L,{key:t.name},[t.type==="text"||t.type==="textarea"?(o(),r("div",be,[e("label",{for:t.id,class:"block text-sm font-medium text-[var(--dream-sub)] mb-1"},c(t.label),9,he),t.type==="text"?C((o(),r("input",{key:0,type:t.type,id:t.id,"onUpdate:modelValue":x=>i[t.name]=x,class:"mt-1 block w-full px-3 py-2 border border-[var(--dream-gray-dark)] rounded-md shadow-sm focus:outline-none focus:ring-[var(--dream-main)] focus:border-[var(--dream-main)] sm:text-sm"},null,8,ye)),[[K,i[t.name]]]):t.type==="textarea"?C((o(),r("textarea",{key:1,id:t.id,"onUpdate:modelValue":x=>i[t.name]=x,rows:"4",class:"mt-1 block w-full px-3 py-2 border border-[var(--dream-gray-dark)] rounded-md shadow-sm focus:outline-none focus:ring-[var(--dream-main)] focus:border-[var(--dream-main)] sm:text-sm resize-none"},null,8,_e)),[[I,i[t.name]]]):g("",!0)])):g("",!0),t.type==="image"?(o(),r("div",we,[e("label",ke,c(t.label),1),e("label",Ce,[a[4]||(a[4]=e("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z"})],-1)),e("span",Le,c(f.value?f.value.name:"이미지 선택"),1),e("input",{id:t.id,type:"file",accept:"image/*",class:"hidden",onChange:P},null,40,$e)]),d.value?(o(),r("div",Se,[a[5]||(a[5]=e("p",{class:"text-xs font-medium text-[var(--dream-sub)] mb-1"},"미리보기",-1)),e("div",Ie,[e("img",{src:d.value,alt:"이미지 미리보기",class:"max-h-full max-w-full object-contain rounded"},null,8,je),e("button",{type:"button",onClick:O,class:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-0.5 w-5 h-5 flex items-center justify-center text-xs leading-none hover:bg-red-600",title:"이미지 제거"}," X ")])])):g("",!0)])):g("",!0)],64))),128))]),e("div",Ue,[e("button",{type:"button",onClick:_,class:"bg-[var(--dream-gray-dark)] hover:bg-opacity-80 text-white font-semibold py-2 px-4 rounded-md shadow-sm"},"취소"),e("button",De,c(p.value?"수정 완료":"등록"),1)])],32)],2)],2)):g("",!0)])]))}}),Fe=V(Me,[["__scopeId","data-v-c4e7af86"]]);export{Fe as default};
